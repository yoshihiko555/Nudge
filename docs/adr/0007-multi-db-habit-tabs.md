# ADR-0007: 複数データベース対応と習慣タブの表示条件

## 決定

1. 設定は `databases` 配列を正とし、旧来のトップレベル DB 設定は廃止する
2. タブ構成は「タスク」「習慣」「設定」とし、有効な DB のみ表示する
3. 習慣タブは曜日チェック列（`日,月,火,水,木,金,土`）で当日の習慣を判定する
4. 習慣は「習慣名ごとに最新 1 件（created_time 降順）」のみ表示し、過去分は表示しない
5. 習慣のチェックは当日の曜日列を `true` に更新し、一覧から除外する
6. 習慣DBの `DataSourceID` / `TitlePropertyName` は未設定でも自動解決する

## 理由

- タスクDBと習慣DBでプロパティ構成が異なるため、DBごとの設定分離が必要
- 習慣の運用は曜日列による予定管理であり、日付プロパティより直感的
- 「今日の習慣のみ」表示で体験がシンプルになり、過去分のノイズを排除できる
- DataSourceID を手動入力しなくても動く方が設定負担が少ない

## 代替案

- 習慣を `日付` プロパティで絞り込む → 既存運用が曜日列中心のため不採用
- 習慣の過去未完了も表示 → 目的が「今日の実行」に限定されるため不採用
- タブを固定（タスク/習慣のみ） → 将来の拡張性を考慮し DB 有効状態で可変にする

## 影響

- `internal/dto/config.go`: `databases` のみを正とし、習慣のデフォルト曜日列を追加
- `internal/store/config_store.go`: 旧 config を読み込み時に `databases` に移行
- `internal/notion/client.go`: 習慣の取得ロジックを created_time 降順＋曜日列参照に変更
- `internal/app/app.go`: 習慣の最新 1 件抽出と未完了のみ表示に変更
- `cmd/nudge/assets/*`: タブ/UI の変更と設定画面の視認性改善
